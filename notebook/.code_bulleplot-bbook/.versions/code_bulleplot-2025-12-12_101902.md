# New Book

Ceci est du markdown.

```julia (editor=false, logging=false, output=true)
using WGLMakie

# Données
x = rand(50)
y = rand(50)
sizes = rand(50) .* 40 .+ 10   # tailles des bulles
colors = rand(50)              # couleur optionnelle

fig = Figure()
ax = Axis(fig[1, 1], title = "Bubble Chart avec Makie")

scatter!(ax, x, y;
    markersize = sizes,
    color = colors,
    colormap = :viridis,
    strokewidth = 0.5,
    strokecolor = :black,
)

fig
# Ajouter les textes aux positions (x, y) pour les centrés dans les bulles.
```
```julia (editor=true, logging=false, output=true)
using Pkg
Pkg.add("Makie")

using WGLMakie
# Interactive 3D galaxy with real-time JavaScript integration
time_slider = Components.Slider(1:360; value=1)
spiral_factor = Components.Slider(1:50; value=20)
explosion = Components.Slider(1:100; value=50)
markersize = Components.Slider(LinRange(0.08, 2.0, 100); value=0.08)

# Generate 3D galaxy data
n_points = 1000
radii = sqrt.(LinRange(0.1, 1, n_points)) * 8
angles = LinRange(0, 4π, n_points) .+ radii * 0.3
points = Point3f.(radii .* cos.(angles), radii .* sin.(angles), 0) .+ randn(Point3f, n_points) .* (Point3f(0.3, 0.3, 2),)

fig, ax, mplot = meshscatter(points;
    color=first.(points), markersize=markersize.value[],
    figure=(; backgroundcolor=:black), axis=(; show_axis=false)
)

# Direct JavaScript integration with Julia observables
jss = js"""
$(mplot).then(plots=>{
    const time = $(time_slider.value);
    const spiral = $(spiral_factor.value);
    const explosion = $(explosion.value);
    const markersize = $(markersize.value);
    const plot = plots[0].plot_object;
    const initial_pos = $(points);

    function update_galaxy() {
        const new_pos = [];
        for (let i = 0; i < initial_pos.length; i++) {
            const [x, y, z] = initial_pos[i];
            const angle = Math.atan2(y, x) + time.value * 0.02;
            const radius = Math.sqrt(x*x + y*y);
            const spiralAngle = angle + radius * spiral.value * 0.05;
            const scale = explosion.value / 50;
            new_pos.push(
                radius * Math.cos(spiralAngle) * scale,
                radius * Math.sin(spiralAngle) * scale, z * scale
            );
        }
        plot.update([['positions_transformed_f32c', new_pos]]);
    }

    [time, spiral, explosion].forEach(obs => obs.on(update_galaxy));
    markersize.on(size => plot.update([['markersize', [size, size, size]]]));
});
"""

DOM.div(
    Grid(
        ["Time: ", time_slider],
        ["Spiral: ", spiral_factor],
        ["Explosion: ", explosion],
        ["Size: ", markersize];
        columns="auto 1fr", gap="10px 20px"
    ),
    fig, jss;
    style=Styles("padding" => "20px")
)
```
```julia (editor=true, logging=false, output=true)

```
